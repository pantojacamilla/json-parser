var Sequelize = require('sequelize');&#xD;&#xA;...&#xD;&#xA;    //Getting 100 tweets previously saved in DB&#xD;&#xA;    Sequelize.query("SELECT * FROM tweets WHERE ORDER BY id DESC LIMIT 100", { model: Model }).then(function(result) {&#xD;&#xA;        if(result.length == 0) {&#xD;&#xA;            callback(false);&#xD;&#xA;        } else {&#xD;&#xA;            var ids = [];&#xD;&#xA;            var realData = {};&#xD;&#xA;            for (var i in result) {&#xD;&#xA;                realData[result[i].dataValues.id_str] = result[i];&#xD;&#xA;                ids.push(result[i].dataValues.id_str);&#xD;&#xA;            }&#xD;&#xA;            //getting twitter data for 100 tweets previously saved in DB&#xD;&#xA;            twitVendor.get('statuses/lookup', {&#xD;&#xA;                id : ids.join(',')&#xD;&#xA;            }, function (err, tweets, response) {&#xD;&#xA;                if (typeof err == 'undefined') {&#xD;&#xA;                    //to get a synchronous saving of all tweets&#xD;&#xA;                    //this could be cleaned up with a Sequelize.Promise.push(...)&#xD;&#xA;                    var i = 0;&#xD;&#xA;                    var saving = false;&#xD;&#xA;                    while (i < tweets.length) {&#xD;&#xA;                        if (!saving) {&#xD;&#xA;                            saving = true;&#xD;&#xA;                            console.log('Updating tweet ', tweets[i].id_str);&#xD;&#xA;                            //updating tweet with new data from twitter&#xD;&#xA;                            Sequelize.query("UPDATE tweets SET retweet_count = "+tweets[i].retweet_count+", favorite_count = "+tweets[i].favorite_count+" WHERE id_str = '"+tweets[i].id_str+"'", {&#xD;&#xA;                                model: Model&#xD;&#xA;                            }).then(function(result) {&#xD;&#xA;                                console.log('Updated tweet');&#xD;&#xA;                                saving = false;&#xD;&#xA;                                i++;&#xD;&#xA;                            }).catch(function (err) {&#xD;&#xA;                                console.log('Failed to update post ', err);&#xD;&#xA;                                saving = false;&#xD;&#xA;                                i++;&#xD;&#xA;                            });&#xD;&#xA;                        }&#xD;&#xA;                    }&#xD;&#xA;                    callback(true);&#xD;&#xA;                    console.log("Updated tweets");&#xD;&#xA;                } else {&#xD;&#xA;                    console.log("Failed :", err);&#xD;&#xA;                    callback(false, err);&#xD;&#xA;                }&#xD;&#xA;            });&#xD;&#xA;        }&#xD;&#xA;    }).catch(function (err) {&#xD;&#xA;        console.log("Failed :", err);&#xD;&#xA;        callback(false, err);&#xD;&#xA;    })