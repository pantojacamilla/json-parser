    <script type="text/javascript"> &#xD;&#xA;    //<![CDATA[&#xD;&#xA;          // this variable will collect the html which will eventually be placed in the side_bar &#xD;&#xA;          var side_bar_html = ""; &#xD;&#xA;        &#xD;&#xA;          // arrays to hold copies of the markers and html used by the side_bar &#xD;&#xA;          // because the function closure trick doesnt work there &#xD;&#xA;          var gmarkers = []; &#xD;&#xA;         // global "map" variable&#xD;&#xA;          var map = null;&#xD;&#xA;          var circle = null;&#xD;&#xA;          var geocoder = new google.maps.Geocoder();&#xD;&#xA;    // A function to create the marker and set up the event window function &#xD;&#xA;    function createMarker(latlng, name, html) {&#xD;&#xA;        var contentString = html;&#xD;&#xA;        var marker = new google.maps.Marker({&#xD;&#xA;            position: latlng,&#xD;&#xA;            // map: map,&#xD;&#xA;            title: name,&#xD;&#xA;            //name: name,&#xD;&#xA;            zIndex: Math.round(latlng.lat()*-100000)<<5&#xD;&#xA;            });&#xD;&#xA;        google.maps.event.addListener(marker, 'click', function() {&#xD;&#xA;            infowindow.setContent(contentString); &#xD;&#xA;            infowindow.open(map,marker);&#xD;&#xA;            });&#xD;&#xA;        // save the info we need to use later for the side_bar&#xD;&#xA;        gmarkers.push(marker);&#xD;&#xA;        // add a line to the side_bar html&#xD;&#xA;        side_bar_html += '<a href="javascript:myclick(' + (gmarkers.length-1) + ')">' + name + '<\/a><br>';&#xD;&#xA;    }&#xD;&#xA;     &#xD;&#xA;    // This function picks up the click and opens the corresponding info window&#xD;&#xA;    function myclick(i) {&#xD;&#xA;      google.maps.event.trigger(gmarkers[i], "click");&#xD;&#xA;    }&#xD;&#xA;    function initialize() {&#xD;&#xA;      // create the map&#xD;&#xA;      var myOptions = {&#xD;&#xA;        zoom: 8,&#xD;&#xA;        center: new google.maps.LatLng(43.907787,-79.359741),&#xD;&#xA;        mapTypeControl: true,&#xD;&#xA;            scale: true,&#xD;&#xA;            scaleControl: true,&#xD;&#xA;        mapTypeControlOptions: {style: google.maps.MapTypeControlStyle.DROPDOWN_MENU},&#xD;&#xA;        navigationControl: true,&#xD;&#xA;        mapTypeId: google.maps.MapTypeId.ROADMAP&#xD;&#xA;      }&#xD;&#xA;      map = new google.maps.Map(document.getElementById("map_canvas"),&#xD;&#xA;                                    myOptions);&#xD;&#xA;    //  google.maps.event.addListener(map, 'bounds_changed', makeSidebar);&#xD;&#xA;    //  google.maps.event.addListener(map, 'center_changed', makeSidebar);&#xD;&#xA;      google.maps.event.addListener(map, 'click', function() {&#xD;&#xA;        infowindow.close();&#xD;&#xA;      });&#xD;&#xA;      // Read the data from example.xml&#xD;&#xA;      downloadUrl("testxml.php", function(doc) {&#xD;&#xA;        var xmlDoc = xmlParse(doc);&#xD;&#xA;        var markers = xmlDoc.documentElement.getElementsByTagName("marker");&#xD;&#xA;        for (var i = 0; i < markers.length; i++) {&#xD;&#xA;          // obtain the attribues of each marker&#xD;&#xA;          var lat = parseFloat(markers[i].getAttribute("lat"));&#xD;&#xA;          var lng = parseFloat(markers[i].getAttribute("lng"));&#xD;&#xA;          var point = new google.maps.LatLng(lat,lng);&#xD;&#xA;          var st = markers[i].getAttribute("state");&#xD;&#xA;          var loc = markers[i].getAttribute("name");      var html="<b>"+name+"</b><br>";&#xD;&#xA;          // create the marker&#xD;&#xA;          var marker = createMarker(point,loc+" "+st,html);&#xD;&#xA;        }&#xD;&#xA;        // put the assembled side_bar_html contents into the side_bar div&#xD;&#xA;        document.getElementById("side_bar").innerHTML = side_bar_html;&#xD;&#xA;      });&#xD;&#xA;    }&#xD;&#xA;    function makeSidebar() {&#xD;&#xA;       side_bar_html = "";&#xD;&#xA;       for (var i=0; i < gmarkers.length; i++){&#xD;&#xA;         if (map.getBounds().contains(gmarkers[i].getPosition())) {&#xD;&#xA;           // add a line to the side_bar html&#xD;&#xA;           side_bar_html += '<a href="javascript:myclick(' + i + ')">' + gmarkers[i].title + '<\/a><br>';&#xD;&#xA;         }&#xD;&#xA;       }&#xD;&#xA;       // put the assembled side_bar_html contents into the side_bar div&#xD;&#xA;       document.getElementById("side_bar").innerHTML = side_bar_html;&#xD;&#xA;    }&#xD;&#xA;            &#xD;&#xA;          function codeAddress() {&#xD;&#xA;            var address = document.getElementById('address').value;&#xD;&#xA;            var radius = parseInt(document.getElementById('radius').value, 10)*1000;&#xD;&#xA;            geocoder.geocode( { 'address': address}, function(results, status) {&#xD;&#xA;              if (status == google.maps.GeocoderStatus.OK) {&#xD;&#xA;                side_bar_html = "";&#xD;&#xA;                map.setCenter(results[0].geometry.location);&#xD;&#xA;                var searchCenter = results[0].geometry.location;&#xD;&#xA;                /*&#xD;&#xA;                var marker = new google.maps.Marker({&#xD;&#xA;                    map: map,&#xD;&#xA;                    position: results[0].geometry.location&#xD;&#xA;                });&#xD;&#xA;                */&#xD;&#xA;                if (circle) circle.setMap(null);&#xD;&#xA;                circle = new google.maps.Circle({center:searchCenter,&#xD;&#xA;                                                 radius: radius,&#xD;&#xA;                                                 fillOpacity: 0.15,&#xD;&#xA;                                                 fillColor: "#FF0000",&#xD;&#xA;                                                 map: map});&#xD;&#xA;                var bounds = new google.maps.LatLngBounds();&#xD;&#xA;    	    var foundMarkers = 0;&#xD;&#xA;                for (var i=0; i<gmarkers.length;i++) {&#xD;&#xA;                  if (google.maps.geometry.spherical.computeDistanceBetween(gmarkers[i].getPosition(),searchCenter) < radius) {&#xD;&#xA;                    bounds.extend(gmarkers[i].getPosition())&#xD;&#xA;                    gmarkers[i].setMap(map);&#xD;&#xA;                    // add a line to the side_bar html&#xD;&#xA;                    side_bar_html += '<a href="javascript:myclick(' + i + ')">' + gmarkers[i].title + '<\/a><br>';&#xD;&#xA;    		foundMarkers++;&#xD;&#xA;                  } else {&#xD;&#xA;                    gmarkers[i].setMap(null);&#xD;&#xA;                  }&#xD;&#xA;                }&#xD;&#xA;                // put the assembled side_bar_html contents into the side_bar div&#xD;&#xA;                document.getElementById("side_bar").innerHTML = side_bar_html;&#xD;&#xA;                if (foundMarkers > 0) {&#xD;&#xA;                  map.fitBounds(bounds);&#xD;&#xA;    	    } else {&#xD;&#xA;                  map.fitBounds(circle.getBounds());&#xD;&#xA;                }&#xD;&#xA;                // makeSidebar();&#xD;&#xA;                google.maps.event.addListenerOnce(map, 'bounds_changed', makeSidebar);&#xD;&#xA;              } else {&#xD;&#xA;                alert('Geocode was not successful for the following reason: ' + status);&#xD;&#xA;              }&#xD;&#xA;            });&#xD;&#xA;          }&#xD;&#xA;     &#xD;&#xA;    var infowindow = new google.maps.InfoWindow(&#xD;&#xA;      { &#xD;&#xA;        size: new google.maps.Size(150,50)&#xD;&#xA;      });&#xD;&#xA;        &#xD;&#xA;        // This Javascript is based on code provided by the&#xD;&#xA;        // Community Church Javascript Team&#xD;&#xA;        // http://www.bisphamchurch.org.uk/   &#xD;&#xA;        // http://econym.org.uk/gmap/&#xD;&#xA;        // from the v2 tutorial page at:&#xD;&#xA;        // http://econym.org.uk/gmap/basic3.htm &#xD;&#xA;    //]]>&#xD;&#xA;    </script> 