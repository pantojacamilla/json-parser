	var wSlider = {&#xD;&#xA;		slider_width : 0,&#xD;&#xA;		slide_count : 0,&#xD;&#xA;		state_count : 0,&#xD;&#xA;		isAutoRotate : false,&#xD;&#xA;		autoRotateTimeout : null,&#xD;&#xA;		isRotating : false,&#xD;&#xA;		autoRotatePause : false,&#xD;&#xA;		isInit: false&#xD;&#xA;	}&#xD;&#xA;	$(document).ready(function  () {&#xD;&#xA;		wSlider.adjustScreen();&#xD;&#xA;	    $(window).focus(function () {&#xD;&#xA;	    	wSlider.startAutoRotate();&#xD;&#xA;		}).blur(function () {&#xD;&#xA;	    	wSlider.stopAutoRotate();&#xD;&#xA;	    	wSlider.autoRotatePause = true;&#xD;&#xA;		    &#xD;&#xA;		});&#xD;&#xA;	})&#xD;&#xA;	window.onresize = function() {&#xD;&#xA;	    wSlider.adjustScreen();&#xD;&#xA;	}&#xD;&#xA;	wSlider.autoRotate = function() {&#xD;&#xA;		if (!wSlider.isAutoRotate) return;&#xD;&#xA;		wSlider.isRotating = true;&#xD;&#xA;		timeFrame = 20000;&#xD;&#xA;		sliderTrack = $(".sliderTrack");&#xD;&#xA;		[diffLeft,diffRight] = wSlider.getDiffs();&#xD;&#xA;		// console.log("diffRight",diffRight)&#xD;&#xA;		// console.log("wSlider.slider_width",wSlider.slider_width)&#xD;&#xA;		diff = wSlider.slider_width &#xD;&#xA;		&#xD;&#xA;		if (diffLeft != 0) {&#xD;&#xA;			diff = diffRight;&#xD;&#xA;			timeFrame = timeFrame*(diffRight/wSlider.slider_width);&#xD;&#xA;			// console.log("after pause",timeFrame)&#xD;&#xA;		}&#xD;&#xA;		// console.log("timeFrame",timeFrame)&#xD;&#xA;		// console.log("diff",diff)&#xD;&#xA;		left = Math.round(sliderTrack.position().left) - diff;&#xD;&#xA;		sliderTrack.animate({"left": left}, timeFrame,"linear", function() {});&#xD;&#xA;		&#xD;&#xA;		wSlider.autoRotateTimeout = setTimeout(function() {&#xD;&#xA;			[diffLeft,diffRight] = wSlider.getDiffs();&#xD;&#xA;			if (diffLeft != 0) {&#xD;&#xA;				// console.log("fix diffRight",diffRight)&#xD;&#xA;				left = Math.round(sliderTrack.position().left) - diffRight;&#xD;&#xA;				sliderTrack.css({"left": left})&#xD;&#xA;			}&#xD;&#xA;			wSlider.adjustCorusel(1);&#xD;&#xA;			wSlider.autoRotate();&#xD;&#xA;		},timeFrame);&#xD;&#xA;	}&#xD;&#xA;	wSlider.stopAutoRotate = function() {&#xD;&#xA;		$(".sliderTrack").stop();&#xD;&#xA;		clearTimeout(wSlider.autoRotateTimeout);&#xD;&#xA;		wSlider.isRotating = false;&#xD;&#xA;	}&#xD;&#xA;	wSlider.startAutoRotate = function(){&#xD;&#xA;		clearTimeout(wSlider.autoRotateTimeout);&#xD;&#xA;		if (wSlider.autoRotatePause) {&#xD;&#xA;			// wSlider.autoRotateTimeout = setTimeout(wSlider.autoRotate, 1000);&#xD;&#xA;			wSlider.autoRotate();&#xD;&#xA;			wSlider.autoRotatePause= false;&#xD;&#xA;		} else {&#xD;&#xA;			wSlider.autoRotateTimeout = setTimeout(wSlider.autoRotate, 3500);&#xD;&#xA;		}&#xD;&#xA;	}&#xD;&#xA;	wSlider.adjustScreen = function () {	&#xD;&#xA;		wSlider.stopAutoRotate();&#xD;&#xA;		if ($(window).width() <=  1265) {&#xD;&#xA;			wSlider.isAutoRotate = false;&#xD;&#xA;			wSlider.slider_width = $(".w-container").width()/2;&#xD;&#xA;		} else {&#xD;&#xA;			wSlider.isAutoRotate = true;&#xD;&#xA;			wSlider.startAutoRotate();&#xD;&#xA;			wSlider.slider_width = $(".w-container").width()/3;&#xD;&#xA;		}&#xD;&#xA;		wSlider.slider_width = Math.round(wSlider.slider_width);&#xD;&#xA;		&#xD;&#xA;		if (!wSlider.isInit) {&#xD;&#xA;			wSlider.isInit = true;&#xD;&#xA;			// duuplicate before/after&#xD;&#xA;			slider_entries = $('.mySlides');&#xD;&#xA;			slider_entries.clone().appendTo( ".sliderTrack" )&#xD;&#xA;			slider_entries.clone().prependTo( ".sliderTrack" )&#xD;&#xA;			wSlider.slide_count = slider_entries.length;&#xD;&#xA;		}&#xD;&#xA;		&#xD;&#xA;		$(".sliderTrack").css({ 'left':0});&#xD;&#xA;		slider_entries = $('.mySlides');&#xD;&#xA;		slider_entries.each(function(i,o) {&#xD;&#xA;			$(o).width($(".w-container").width());&#xD;&#xA;			$(o).css({ 'left': wSlider.slider_width*(i-wSlider.slide_count)+'px'});&#xD;&#xA;			$(o).attr("sid",i);&#xD;&#xA;		})&#xD;&#xA;		$(".w-container").height(slider_entries.height()*0.79);&#xD;&#xA;	}&#xD;&#xA;	wSlider.adjustCorusel = function(n) {&#xD;&#xA;		slider_entries = $('.mySlides');&#xD;&#xA;		if (n > 0) {&#xD;&#xA;			// console.log(">")&#xD;&#xA;			// move first left element to the last right&#xD;&#xA;			last_postition = $(slider_entries[slider_entries.length-1]).position().left;&#xD;&#xA;			last_postition = Math.round(last_postition);&#xD;&#xA;			last_postition += wSlider.slider_width;&#xD;&#xA;			$(slider_entries[0]).css("left",last_postition+'px');&#xD;&#xA;			$(slider_entries[0] ).detach().appendTo( ".sliderTrack" ).show();&#xD;&#xA;		} else {&#xD;&#xA;			// console.log("<")&#xD;&#xA;			// move last right element to the first left&#xD;&#xA;			fisrt_postition = $(slider_entries[0]).position().left;&#xD;&#xA;			fisrt_postition = Math.round(fisrt_postition);&#xD;&#xA;			fisrt_postition -= wSlider.slider_width;&#xD;&#xA;			$(slider_entries[slider_entries.length-1]).css("left",fisrt_postition+'px');&#xD;&#xA;			$(slider_entries[slider_entries.length-1] ).detach().prependTo( ".sliderTrack" ).show();&#xD;&#xA;		}&#xD;&#xA;	}&#xD;&#xA;	wSlider.sliderMove = function(n) {&#xD;&#xA;		// don't run if previous run still running&#xD;&#xA;		if (wSlider.state_count != 0) return;&#xD;&#xA;		wSlider.state_count = 1;&#xD;&#xA;		wSlider.stopAutoRotate();&#xD;&#xA;		// console.log("wSlider.sliderMove",n)&#xD;&#xA;		&#xD;&#xA;		sliderTrack = $(".sliderTrack");&#xD;&#xA;		stLeft = Math.round(sliderTrack.position().left);&#xD;&#xA;		[diffLeft,diffRight] = wSlider.getDiffs();&#xD;&#xA;		if (diffLeft  == 0){&#xD;&#xA;			// normal case - auto rotate is off&#xD;&#xA;			stLeft -= wSlider.slider_width * n;&#xD;&#xA;			wSlider.adjustCorusel(n);&#xD;&#xA;		} else {&#xD;&#xA;			// rotating in progress &#xD;&#xA;			if (n > 0) {&#xD;&#xA;				stLeft -= diffRight;&#xD;&#xA;				wSlider.adjustCorusel(n);&#xD;&#xA;			} else {&#xD;&#xA;				// no need to wSlider.adjustCorusel since we simply undoing the last rotation&#xD;&#xA;				stLeft += diffLeft;&#xD;&#xA;			}&#xD;&#xA;		}&#xD;&#xA;		// console.log('stLeft: '+stLeft);&#xD;&#xA;		sliderTrack.animate({"left": stLeft}, 250,"swing", function() {&#xD;&#xA;			wSlider.state_count = 0;&#xD;&#xA;			if (wSlider.isAutoRotate) {&#xD;&#xA;				wSlider.startAutoRotate();&#xD;&#xA;			}&#xD;&#xA;		});&#xD;&#xA;	}&#xD;&#xA;	// returns [diffLeft,diffRight] &#xD;&#xA;	// diffLeft - the pixel value of the left most visible slider that is invisible &#xD;&#xA;	// diffRight - the pixel value of the left most visible slider that is visible&#xD;&#xA;	wSlider.getDiffs = function() {&#xD;&#xA;		sliderTrack = $(".sliderTrack");&#xD;&#xA;		stLeft = Math.round(sliderTrack.position().left);&#xD;&#xA;		diff = Math.abs(stLeft) % wSlider.slider_width;&#xD;&#xA;		if (Math.abs(Math.abs(diff) - wSlider.slider_width) < 1) diff = 0;&#xD;&#xA;		diffLeft = diff;&#xD;&#xA;		diffRight = wSlider.slider_width - diff;&#xD;&#xA;		if (stLeft > 0 && diff != 0) {&#xD;&#xA;			// swap&#xD;&#xA;			[diffLeft,diffRight] = [diffRight,diffLeft];&#xD;&#xA;		}&#xD;&#xA;		return [diffLeft,diffRight];&#xD;&#xA;	}&#xD;&#xA;	wSlider.focusSlide = function(o) {&#xD;&#xA;		// don't run if previous run still running&#xD;&#xA;		if (wSlider.state_count != 0) return;&#xD;&#xA;		wSlider.state_count = 1;&#xD;&#xA;		if (wSlider.isRotating) {&#xD;&#xA;			wSlider.autoRotatePause = true;&#xD;&#xA;		}&#xD;&#xA;		wSlider.stopAutoRotate();&#xD;&#xA;		// console.log("wSlider.focusSlide")&#xD;&#xA;		$(".ctrl-buttons").hide();&#xD;&#xA;		o = $(o);&#xD;&#xA;		$(".growImg",o).removeClass("growImg").addClass("growImg-tmp");&#xD;&#xA;		&#xD;&#xA;		oLeft = Math.round(o.position().left);&#xD;&#xA;		// console.log("left",oLeft);&#xD;&#xA;		sliderTrack = $(".sliderTrack");&#xD;&#xA;		stLeft = Math.round(sliderTrack.position().left);&#xD;&#xA;		slider_entries = $('.mySlides');&#xD;&#xA;		cWidth = $(".w-container").width();&#xD;&#xA;		slider_entries.each(function  (i,sibling) {&#xD;&#xA;			sibling = $(sibling);&#xD;&#xA;			sLeft = Math.round(sibling.position().left);&#xD;&#xA;			relativeLeft = sLeft + stLeft;&#xD;&#xA;			if (relativeLeft < -wSlider.slider_width ||&#xD;&#xA;				relativeLeft >= cWidth) &#xD;&#xA;				{&#xD;&#xA;					return;&#xD;&#xA;				}&#xD;&#xA;			sibling.data('origLeft',sLeft);&#xD;&#xA;			if (sLeft <= oLeft) {&#xD;&#xA;				if (relativeLeft <= 0 && sLeft != oLeft) {&#xD;&#xA;					[diffLeft,diffRight] = wSlider.getDiffs();&#xD;&#xA;					sibling.animate({"left": -diffRight - stLeft}, 250,"swing", function() {});&#xD;&#xA;				} else {&#xD;&#xA;					sibling.animate({"left": 0 - stLeft}, 250,"swing", function() {});&#xD;&#xA;				}&#xD;&#xA;			} else {&#xD;&#xA;				sibling.animate({"left": cWidth - stLeft}, 250,"swing", function() {});&#xD;&#xA;			}&#xD;&#xA;		})&#xD;&#xA;		// redraw text&#xD;&#xA;		content = $(".content",o);&#xD;&#xA;		content.hide();&#xD;&#xA;		$(".displayLeft",content).removeClass("displayLeft").addClass("displayRight");&#xD;&#xA;		content.fadeIn(1000);&#xD;&#xA;	}&#xD;&#xA;	wSlider.unfocusSlide = function(o) {&#xD;&#xA;		event.stopPropagation();&#xD;&#xA;		if (wSlider.state_count != 1) return;&#xD;&#xA;		wSlider.state_count = 0;&#xD;&#xA;		o = $(o).parent();&#xD;&#xA;		slider_entries = $('.mySlides');&#xD;&#xA;		slider_entries.each(function  (i,sibling) {&#xD;&#xA;			sibling = $(sibling);&#xD;&#xA;			l = sibling.data('origLeft');&#xD;&#xA;			sibling.data('origLeft',null);&#xD;&#xA;			if (l != null) {&#xD;&#xA;				sibling.animate({"left": l}, 250,"swing", function() {});&#xD;&#xA;			}&#xD;&#xA;		})&#xD;&#xA;		$(".growImg-tmp",o).removeClass("growImg-tmp").addClass("growImg");&#xD;&#xA;		$(".ctrl-buttons").show();&#xD;&#xA;		// redraw text&#xD;&#xA;		content = $(".content",o);&#xD;&#xA;		content.hide();&#xD;&#xA;		$(".displayRight",content).removeClass("displayRight").addClass("displayLeft");&#xD;&#xA;		content.fadeIn(1000);&#xD;&#xA;		wSlider.startAutoRotate();&#xD;&#xA;	}