    var drawingManager;&#xD;&#xA;    		var lastShape;&#xD;&#xA;    		var map;&#xD;&#xA;    		var markers = [];&#xD;&#xA;    		var timeout;&#xD;&#xA;    		var timeoutwait = 500;&#xD;&#xA;    		function initialize() {&#xD;&#xA;    		    map = new google.maps.Map(document.getElementById('gmap'), {&#xD;&#xA;    		        zoom: 3,&#xD;&#xA;    		        center: new google.maps.LatLng(40.463667, -3.749220),&#xD;&#xA;    		        mapTypeId: google.maps.MapTypeId.ROADMAP,&#xD;&#xA;    		        disableDefaultUI: true,&#xD;&#xA;    		        zoomControl: true&#xD;&#xA;    		    });&#xD;&#xA;    		    var shapeOptions = {&#xD;&#xA;    		        strokeWeight: 1,&#xD;&#xA;    		        strokeOpacity: 1,&#xD;&#xA;    		        fillOpacity: 0.2,&#xD;&#xA;    		        editable: true,&#xD;&#xA;    		        draggable: true,&#xD;&#xA;    		        clickable: true,&#xD;&#xA;    		        strokeColor: '#D60056',&#xD;&#xA;    		        fillColor: '#D60056'&#xD;&#xA;    		    };&#xD;&#xA;    		    var shapeOptionsCircle = {&#xD;&#xA;    		        strokeWeight: 1,&#xD;&#xA;    		        strokeOpacity: 1,&#xD;&#xA;    		        fillOpacity: 0.2,&#xD;&#xA;    		        editable: true,&#xD;&#xA;    		        draggable: true,&#xD;&#xA;    		        clickable: false,&#xD;&#xA;    		        strokeColor: '#D60056',&#xD;&#xA;    		        fillColor: '#D60056'&#xD;&#xA;    		    };&#xD;&#xA;    		    drawingManager = new google.maps.drawing.DrawingManager({&#xD;&#xA;    		        drawingMode: null,&#xD;&#xA;    		        drawingControlOptions: {&#xD;&#xA;    		            drawingModes: [google.maps.drawing.OverlayType.CIRCLE, 			google.maps.drawing.OverlayType.RECTANGLE]&#xD;&#xA;    		        },&#xD;&#xA;    		        rectangleOptions: shapeOptions,&#xD;&#xA;    		        circleOptions: shapeOptionsCircle,&#xD;&#xA;    		        Options: shapeOptions,&#xD;&#xA;    		        map: map&#xD;&#xA;    		    });&#xD;&#xA;    		    google.maps.event.addListener(drawingManager, 'overlaycomplete', function (e) {&#xD;&#xA;    		        if (lastShape != undefined) {&#xD;&#xA;    		            lastShape.setMap(null);&#xD;&#xA;    		        }&#xD;&#xA;    		        if (shift_draw == false) {&#xD;&#xA;    		            drawingManager.setDrawingMode(null);&#xD;&#xA;    		        }&#xD;&#xA;    		        lastShape = e.overlay;&#xD;&#xA;    		        lastShape.type = e.type;			&#xD;&#xA;    		        lastBounds = lastShape.getBounds();&#xD;&#xA;    		        clearTimeout(timeout);&#xD;&#xA;    		        drawHotels();&#xD;&#xA;    		        &#xD;&#xA;    		        lastShape.addListener('bounds_changed', function () {&#xD;&#xA;    		        	lastBounds = lastShape.getBounds();&#xD;&#xA;    		            clearTimeout(timeout);&#xD;&#xA;    		            timeout = setTimeout(drawHotels, timeoutwait);&#xD;&#xA;    		        });&#xD;&#xA;    		        lastShape.addListener('radius_changed', function() {&#xD;&#xA;    		          lastBounds = lastShape.getBounds();&#xD;&#xA;    		          clearTimeout(timeout);&#xD;&#xA;    		          timeout = setTimeout(drawHotels, timeoutwait);&#xD;&#xA;    		        });&#xD;&#xA;    		    });&#xD;&#xA;    		    var shift_draw = false;			    &#xD;&#xA;    		}&#xD;&#xA;    		google.maps.event.addDomListener(window, 'load', initialize);&#xD;&#xA;    		&#xD;&#xA;    		&#xD;&#xA;    		function drawHotels() {&#xD;&#xA;    			if ( markers != undefined) {&#xD;&#xA;    				for (var i = 0; i < markers.length; i++ ) {&#xD;&#xA;    				    markers[i].setMap(null);&#xD;&#xA;    				}&#xD;&#xA;    				markers.length = 0;&#xD;&#xA;    			}&#xD;&#xA;    			var json = [&#xD;&#xA;    			   		    {"id":8585885,"hotel":"Hotel name", "lat" : "1.3", "long" : "1.33"},&#xD;&#xA;    						{"id":8585886,"hotel":"Hotel name 1", "lat" : "-1.3", "long" : "1.33"},&#xD;&#xA;    						{"id":8585886,"hotel":"Hotel name 1", "lat" : "42.5000", "long" : "1.5000"},&#xD;&#xA;    						{"id":8585886,"hotel":"Hotel name 1", "lat" : "24.0000", "long" : "54.0000"},&#xD;&#xA;    						{"id":8585886,"hotel":"Hotel name 1", "lat" : "17.0500", "long" : "-61.8000"},&#xD;&#xA;    						{"id":8585886,"hotel":"Hotel name 1", "lat" : "18.2500", "long" : "-63.1667"},&#xD;&#xA;    						{"id":8585886,"hotel":"Hotel name 1", "lat" : "24.0000", "long" : "54.0000"},&#xD;&#xA;    						{"id":8585886,"hotel":"Hotel name 1", "lat" : "41.0000", "long" : "20.0000"},&#xD;&#xA;    						{"id":8585886,"hotel":"Hotel name 1", "lat" : "40.0000", "long" : "45.0000"},&#xD;&#xA;    						{"id":8585886,"hotel":"Hotel name 1", "lat" : "12.2500", "long" : "-68.7500"},&#xD;&#xA;    						{"id":8585886,"hotel":"Hotel name 1", "lat" : "-12.5000", "long" : "18.5000"},&#xD;&#xA;    						{"id":8585886,"hotel":"Hotel name 1", "lat" : "35.0000", "long" : "105.0000"},&#xD;&#xA;    						{"id":8585886,"hotel":"Hotel name 1", "lat" : "-90.0000", "long" : "0.0000"},&#xD;&#xA;    						{"id":8585886,"hotel":"Hotel name 1", "lat" : "34.0000", "long" : "-64.0000"},&#xD;&#xA;    						{"id":8585886,"hotel":"Hotel name 1", "lat" : "-14.3333", "long" : "-170.0000"},&#xD;&#xA;    						{"id":8585886,"hotel":"Hotel name 1", "lat" : "47.3333", "long" : "13.3333"},&#xD;&#xA;    						{"id":8585886,"hotel":"Hotel name 1", "lat" : "-27.0000", "long" : "133.0000"},&#xD;&#xA;    						{"id":8585886,"hotel":"Hotel name 1", "lat" : "12.5000", "long" : "-69.9667"}&#xD;&#xA;    					   ];&#xD;&#xA;    			&#xD;&#xA;    			var hotels = eval(json);&#xD;&#xA;    			lastBounds = lastShape.getBounds();&#xD;&#xA;    			for ( var i = 0; i<hotels.length; i++ ) {&#xD;&#xA;    				var hotel = hotels[i];&#xD;&#xA;    				if ( lastBounds.contains(  new google.maps.LatLng(hotel.lat, hotel.long) ) ) {&#xD;&#xA;    					 &#xD;&#xA;    					var m1 = new google.maps.Marker({&#xD;&#xA;    					    position: new google.maps.LatLng(hotel.lat, hotel.long),&#xD;&#xA;    					    map: map,&#xD;&#xA;    					    title: hotel.name&#xD;&#xA;    					});&#xD;&#xA;    					markers.push(m1);&#xD;&#xA;    				} else if ( lastShape.type == 'circle') {&#xD;&#xA;    					google.maps.Circle.prototype.contains = function(latLng) {&#xD;&#xA;    					  var condition = this.getBounds().contains(latLng) && google.maps.geometry.spherical.computeDistanceBetween(this.getCenter(), latLng) <= this.getRadius();&#xD;&#xA;    					  if ( condition ) {&#xD;&#xA;    					  	var m1 = new google.maps.Marker({&#xD;&#xA;    					  	    position: new google.maps.LatLng(hotel.lat, hotel.long),&#xD;&#xA;    					  	    map: map,&#xD;&#xA;    					  	    title: hotel.name&#xD;&#xA;    					  	});&#xD;&#xA;    					  	markers.push(m1);&#xD;&#xA;    					  }&#xD;&#xA;    					}&#xD;&#xA;    				}&#xD;&#xA;    			}&#xD;&#xA;    		}