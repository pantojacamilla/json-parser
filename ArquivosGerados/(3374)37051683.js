    function(req, res) {&#xD;&#xA;      var tx = new Transaction(client);&#xD;&#xA;      tx.on('error', die);&#xD;&#xA;      tx.begin();&#xD;&#xA;      &#xD;&#xA;      tx.query('INSERT_1 VALUES(...) RETURNING id', paramValues, function(err, result) {&#xD;&#xA;        if (err) {&#xD;&#xA;          tx.rollback();&#xD;&#xA;          res.send("Something was wrong!");&#xD;&#xA;          return;&#xD;&#xA;        }&#xD;&#xA;        &#xD;&#xA;        var paramValues2 = result.rows[0].id;&#xD;&#xA;        tx.query('INSERT_2 VALUES(...)', paramValues2, function(err2, result2) {&#xD;&#xA;          if (err) {&#xD;&#xA;            tx.rollback();&#xD;&#xA;            res.send("Something was wrong!");&#xD;&#xA;            return;&#xD;&#xA;          }&#xD;&#xA;          &#xD;&#xA;          // HERE'S THE PROBLEM (I don't want to run it always this last statement)&#xD;&#xA;          // If I don't run it, I will miss tx.commit()&#xD;&#xA;          if (req.body.value != null) {&#xD;&#xA;            tx.query('INSERT_3 VALUES(...)', paramValues3, function(err3, result3) {&#xD;&#xA;              if (err) {&#xD;&#xA;                tx.rollback();&#xD;&#xA;                res.send("Something was wrong!");&#xD;&#xA;                return;&#xD;&#xA;              }&#xD;&#xA;            &#xD;&#xA;              tx.commit();&#xD;&#xA;              res.send("Everything fine!");&#xD;&#xA;            });&#xD;&#xA;          }&#xD;&#xA;        });&#xD;&#xA;      });&#xD;&#xA;    }