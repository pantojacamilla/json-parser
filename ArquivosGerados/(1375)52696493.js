    var draw = false;&#xD;&#xA;    init();&#xD;&#xA;    /**&#xD;&#xA;             * FUNCTIONS&#xD;&#xA;             */&#xD;&#xA;    function init() {&#xD;&#xA;      // initialize DataTables&#xD;&#xA;      var table = $("#table").DataTable();&#xD;&#xA;      // get table data&#xD;&#xA;      var tableData = getTableData(table);&#xD;&#xA;      // create Highcharts&#xD;&#xA;      createHighcharts(tableData);&#xD;&#xA;      // table events&#xD;&#xA;      setTableEvents(table);&#xD;&#xA;    }&#xD;&#xA;    function getTableData(table) {&#xD;&#xA;      var dataArray = [],&#xD;&#xA;      countryArray = [],&#xD;&#xA;      populationArray = [],&#xD;&#xA;      densityArray = [];&#xD;&#xA;      ageArray=[];&#xD;&#xA;      // loop table rows&#xD;&#xA;      table.rows({ search: "applied" }).every(function () {&#xD;&#xA;        var data = this.data();&#xD;&#xA;        countryArray.push(data[0]);&#xD;&#xA;        populationArray.push(parseInt(data[1].replace(/\,/g, "")));&#xD;&#xA;        densityArray.push(parseInt(data[2].replace(/\,/g, "")));&#xD;&#xA;        ageArray.push(parseInt(data[3].replace(/\,/g, "")));&#xD;&#xA;      });&#xD;&#xA;      // store all data in dataArray&#xD;&#xA;      dataArray.push(countryArray, populationArray, densityArray,ageArray);&#xD;&#xA;      return dataArray;&#xD;&#xA;    }&#xD;&#xA;    function createHighcharts(data) {&#xD;&#xA;      Highcharts.setOptions({&#xD;&#xA;        lang: {&#xD;&#xA;          thousandsSep: "," } });&#xD;&#xA;      Highcharts.chart("chart", {&#xD;&#xA;        title: {&#xD;&#xA;          text: "AcuityCRM" },&#xD;&#xA;        subtitle: {&#xD;&#xA;          text: "Opportunity Reports" },&#xD;&#xA;        xAxis: [&#xD;&#xA;        {&#xD;&#xA;          categories: data[0],&#xD;&#xA;          labels: {&#xD;&#xA;            rotation: -45 } }],&#xD;&#xA;        yAxis: [&#xD;&#xA;        {&#xD;&#xA;          // first yaxis&#xD;&#xA;          title: {&#xD;&#xA;            text: "Population (2017)" } &#xD;&#xA;        },&#xD;&#xA;        {&#xD;&#xA;          // secondary yaxis&#xD;&#xA;          title: {&#xD;&#xA;            text: "Density (P/Km²)" },&#xD;&#xA;          min: 0,&#xD;&#xA;          opposite: true }],&#xD;&#xA;        series: [&#xD;&#xA;        {&#xD;&#xA;          name: "Population (2017)",&#xD;&#xA;          color: "#0071A7",&#xD;&#xA;          type: "column",&#xD;&#xA;          data: data[1],&#xD;&#xA;          tooltip: {&#xD;&#xA;            valueSuffix: " M" } &#xD;&#xA;        },&#xD;&#xA;        {&#xD;&#xA;            name: "Med Age",&#xD;&#xA;            color: "#68cc72",&#xD;&#xA;            type: "spline",&#xD;&#xA;            data: data[3]&#xD;&#xA;            // ,&#xD;&#xA;            // tooltip: {&#xD;&#xA;            //   valueSuffix: " M"&#xD;&#xA;            //  } &#xD;&#xA;          },&#xD;&#xA;        {&#xD;&#xA;          name: "Density (P/Km²)",&#xD;&#xA;          color: "#FF404E",&#xD;&#xA;          type: "spline",&#xD;&#xA;          data: data[2],&#xD;&#xA;          yAxis: 1 }],&#xD;&#xA;        tooltip: {&#xD;&#xA;          shared: true },&#xD;&#xA;        legend: {&#xD;&#xA;          backgroundColor: "#ececec",&#xD;&#xA;          shadow: true },&#xD;&#xA;        credits: {&#xD;&#xA;          enabled: false },&#xD;&#xA;        noData: {&#xD;&#xA;          style: {&#xD;&#xA;            fontSize: "16px" } } }&#xD;&#xA;        );&#xD;&#xA;        Highcharts.chart('pie', {&#xD;&#xA;            chart: {&#xD;&#xA;                plotBackgroundColor: null,&#xD;&#xA;                plotBorderWidth: null,&#xD;&#xA;                plotShadow: false,&#xD;&#xA;                type: 'pie'&#xD;&#xA;            },&#xD;&#xA;            title: {&#xD;&#xA;                text: 'Report Pie Chart'&#xD;&#xA;            },&#xD;&#xA;            tooltip: {&#xD;&#xA;                pointFormat: '{series.name}: <b>{point.percentage:.1f}%</b>'&#xD;&#xA;            },&#xD;&#xA;            plotOptions: {&#xD;&#xA;                pie: {&#xD;&#xA;                    allowPointSelect: true,&#xD;&#xA;                    cursor: 'pointer',&#xD;&#xA;                    dataLabels: {&#xD;&#xA;                        enabled: true,&#xD;&#xA;                        format: '<b>{point.name}</b>: {point.percentage:.1f} %',&#xD;&#xA;                        style: {&#xD;&#xA;                            color: (Highcharts.theme && Highcharts.theme.contrastTextColor) || 'black'&#xD;&#xA;                        }&#xD;&#xA;                    }&#xD;&#xA;                }&#xD;&#xA;            },&#xD;&#xA;            series: [{&#xD;&#xA;                name: 'PErcentage',&#xD;&#xA;                colorByPoint: true,&#xD;&#xA;                data: [data[2]],&#xD;&#xA;                &#xD;&#xA;            },{&#xD;&#xA;                name: 'PErcentage',&#xD;&#xA;                colorByPoint: true,&#xD;&#xA;                data: [data[1]],&#xD;&#xA;                &#xD;&#xA;            },&#xD;&#xA;            {&#xD;&#xA;                name: 'PErcentage',&#xD;&#xA;                colorByPoint: true,&#xD;&#xA;                data: [data[3]],&#xD;&#xA;                &#xD;&#xA;            }]&#xD;&#xA;            &#xD;&#xA;        });&#xD;&#xA;    }&#xD;&#xA;    function setTableEvents(table) {&#xD;&#xA;      // listen for page clicks&#xD;&#xA;      table.on("page", function () {&#xD;&#xA;        draw = true;&#xD;&#xA;      });&#xD;&#xA;      // listen for updates and adjust the chart accordingly&#xD;&#xA;      table.on("draw", function () {&#xD;&#xA;        if (draw) {&#xD;&#xA;          draw = false;&#xD;&#xA;        } else {&#xD;&#xA;          var tableData = getTableData(table);&#xD;&#xA;          createHighcharts(tableData);&#xD;&#xA;        }&#xD;&#xA;      });&#xD;&#xA;    }