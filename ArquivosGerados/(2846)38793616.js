    var myApp = angular.module('MyApp', []);&#xD;&#xA;    myApp.controller('MyCtrl1', ['$scope', 'myService', function($scope, myService) {&#xD;&#xA;        $scope.hasLoaded = false;&#xD;&#xA;        $scope.fileName = '';&#xD;&#xA;        &#xD;&#xA;        myService.onLoaded($scope, function(e, data){&#xD;&#xA;             // I want to test the following two lines, in the really the code here is much more complex&#xD;&#xA;            $scope.fileName = data.fileName;&#xD;&#xA;            $scope.hasLoaded = true;&#xD;&#xA;        });&#xD;&#xA;    }]);&#xD;&#xA;    myApp.controller('MyCtrl2', ['$rootScope', '$scope', '$timeout', 'myService', function($rootScope, $scope, $timeout, myService) {&#xD;&#xA;        $scope.isLoading = false;&#xD;&#xA;        $scope.title = 'Click me to load';&#xD;&#xA;        $scope.load = function(){&#xD;&#xA;            $scope.isLoading = true;&#xD;&#xA;            $scope.title = 'Loading, please wait...';&#xD;&#xA;            &#xD;&#xA;            $timeout(function() {&#xD;&#xA;                $rootScope.$emit('loaded', { fileName: 'test.txt'});&#xD;&#xA;            }, 1000);&#xD;&#xA;        };&#xD;&#xA;        myService.onLoaded($scope, function(){&#xD;&#xA;            $scope.hasLoaded = true;&#xD;&#xA;        });&#xD;&#xA;    }]);&#xD;&#xA;    myApp.service('myService', ['$rootScope', function ($rootScope) {&#xD;&#xA;        this.onLoaded = function(scope, callback) {&#xD;&#xA;            var handler = $rootScope.$on('loaded', callback);&#xD;&#xA;            scope.$on('$destroy', handler);&#xD;&#xA;        };&#xD;&#xA;    }]);