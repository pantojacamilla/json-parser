    var express = require('express');&#xD;&#xA;    var bodyParser = require('body-parser');&#xD;&#xA;    var cookieParser = require('cookie-parser');&#xD;&#xA;    var session = require('express-session');&#xD;&#xA;    var crypto = require('crypto');   &#xD;&#xA;    //encrypt password function&#xD;&#xA;    function hashPW(pwd) {&#xD;&#xA;        var hash = crypto.createHash('sha256').update(pwd).digest('base64');&#xD;&#xA;        return hash.toString();&#xD;&#xA;    }&#xD;&#xA;    var app = express();&#xD;&#xA;    //this is the new way to call this module&#xD;&#xA;    app.use(bodyParser.json());&#xD;&#xA;    app.use(bodyParser.urlencoded({&#xD;&#xA;        extended: true&#xD;&#xA;    }));&#xD;&#xA;    app.use(cookieParser('MAGICString'));&#xD;&#xA;    //new way to init session&#xD;&#xA;    app.use(session({secret: 'ssshhhhh', resave: false, saveUninitialized: false}));&#xD;&#xA;    //see if user is authorized to be here&#xD;&#xA;    app.get('/restricted', function(req, res) {&#xD;&#xA;        if (req.session.user) {&#xD;&#xA;            res.send ('<h2>' + req.session.success + '</h2>' +&#xD;&#xA;                    '<p>You have entered the restricted section<p><br>' +&#xD;&#xA;                    '<a href="/logout">logout</a>');&#xD;&#xA;        }&#xD;&#xA;        else {&#xD;&#xA;            req.session.error = 'Access denied';&#xD;&#xA;            res.redirect('/login');&#xD;&#xA;        }&#xD;&#xA;    });&#xD;&#xA;    app.get('/logout', function (req, res) {&#xD;&#xA;        req.session.destroy(function() {&#xD;&#xA;            res.redirect('/login');&#xD;&#xA;        });&#xD;&#xA;    });&#xD;&#xA;    app.get('/login', function(req, res) {&#xD;&#xA;        var response = '<form method="POST">' +&#xD;&#xA;                'Username: <input type="text" name="username"><br>' +&#xD;&#xA;                'Password: <input type="text" name="password"><br>' +&#xD;&#xA;                '<input type="submit" value="Submit"></form>';&#xD;&#xA;        if (req.session.user) {&#xD;&#xA;            res.redirect('/restricted');&#xD;&#xA;        } else if (req.session.error) {&#xD;&#xA;                response += '<h2>' + req.session.error + '</h2>';&#xD;&#xA;            }&#xD;&#xA;        res.type = ('html');&#xD;&#xA;        res.send(response);&#xD;&#xA;    });&#xD;&#xA;    //on form submit&#xD;&#xA;    app.post('/login', function (req, res) {&#xD;&#xA;        //user should be a lookup of req.body.username in database&#xD;&#xA;        var user = {name: req.body.username, password:hashPW("myPass")};&#xD;&#xA;        if (user.password === hashPW(req.body.password.toString())) {&#xD;&#xA;            req.session.regenerate(function() {&#xD;&#xA;                req.session.user = user;&#xD;&#xA;                req.session.success = 'Authenticated as ' + user.name;&#xD;&#xA;                res.redirect('/restricted');&#xD;&#xA;            });&#xD;&#xA;        } else {&#xD;&#xA;            req.session.regenerate(function() {&#xD;&#xA;                req.session.error = 'Authentication failed';&#xD;&#xA;                res.redirect('/restricted');&#xD;&#xA;            });&#xD;&#xA;            res.redirect('/login');&#xD;&#xA;        }&#xD;&#xA;    });&#xD;&#xA;    app.listen(8080);