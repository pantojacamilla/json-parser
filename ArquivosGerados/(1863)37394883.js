    function LoadImageGroupFormat() {&#xD;&#xA;        return new Promise(function(resolve, reject) {&#xD;&#xA;          var xhttp = new XMLHttpRequest();&#xD;&#xA;          xhttp.open('GET', "imagegroup_format.txt");&#xD;&#xA;          xhttp.onload = function() {&#xD;&#xA;            if (xhttp.status == 200) resolve(xhttp.responseText);&#xD;&#xA;            else reject(Error(xhttp.statusText));&#xD;&#xA;          };&#xD;&#xA;          xhttp.onerror = function() {&#xD;&#xA;            reject(Error("Network Error"));&#xD;&#xA;          };&#xD;&#xA;          xhttp.send();&#xD;&#xA;        });&#xD;&#xA;      }&#xD;&#xA;      //the object&#xD;&#xA;    var Registerhandler = {&#xD;&#xA;      imageGroupIndex: 0,&#xD;&#xA;      foo: function() {&#xD;&#xA;        //Do something else here&#xD;&#xA;      },&#xD;&#xA;      GetImageGroupFormat: function() {&#xD;&#xA;        var imageGroupIndex = this.imageGroupIndex;&#xD;&#xA;        LoadImageGroupFormat().then(function(ImageGroup_Format) {&#xD;&#xA;          //Do something with ImageGroup_Format&#xD;&#xA;          imageGroupIndex++; //This works&#xD;&#xA;          foo(); //Doesn't work - undefined&#xD;&#xA;        }, function(error) {&#xD;&#xA;          console.error("Failed to Load ImageGroup Format", error);&#xD;&#xA;        });&#xD;&#xA;      }&#xD;&#xA;    }