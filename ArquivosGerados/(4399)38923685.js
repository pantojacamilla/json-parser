    (function($) {&#xD;&#xA;    /*---------------------------&#xD;&#xA;     Defaults for Reveal&#xD;&#xA;    ----------------------------*/&#xD;&#xA;    	 &#xD;&#xA;    /*---------------------------&#xD;&#xA;     Listener for data-reveal-id attributes&#xD;&#xA;    ----------------------------*/&#xD;&#xA;    	$('a[data-reveal-id]').live('click', function(e) {&#xD;&#xA;    		e.preventDefault();&#xD;&#xA;    		var modalLocation = $(this).attr('data-reveal-id');&#xD;&#xA;    		$('#'+modalLocation).reveal($(this).data());&#xD;&#xA;    	});&#xD;&#xA;    /*---------------------------&#xD;&#xA;     Extend and Execute&#xD;&#xA;    ----------------------------*/&#xD;&#xA;        $.fn.reveal = function(options) {&#xD;&#xA;            &#xD;&#xA;            &#xD;&#xA;            var defaults = {  &#xD;&#xA;    	    	animation: 'fadeAndPop', //fade, fadeAndPop, none&#xD;&#xA;    		    animationspeed: 300, //how fast animtions are&#xD;&#xA;    		    closeonbackgroundclick: false, //if you click background will modal close?&#xD;&#xA;    		    dismissmodalclass: 'close-reveal-modal' //the class of a button or element that will close an open modal&#xD;&#xA;        	}; &#xD;&#xA;        	&#xD;&#xA;            //Extend dem' options&#xD;&#xA;            var options = $.extend({}, defaults, options); &#xD;&#xA;    	&#xD;&#xA;            return this.each(function() {&#xD;&#xA;            &#xD;&#xA;    /*---------------------------&#xD;&#xA;     Global Variables&#xD;&#xA;    ----------------------------*/&#xD;&#xA;            	var modal = $(this),&#xD;&#xA;            		topMeasure  = parseInt(modal.css('top')),&#xD;&#xA;    				topOffset = modal.height() + topMeasure,&#xD;&#xA;              		locked = false,&#xD;&#xA;    				modalBG = $('.reveal-modal-bg');&#xD;&#xA;    /*---------------------------&#xD;&#xA;     Create Modal BG&#xD;&#xA;    ----------------------------*/&#xD;&#xA;    			if(modalBG.length == 0) {&#xD;&#xA;    				modalBG = $('<div class="reveal-modal-bg" />').insertAfter(modal);&#xD;&#xA;    			}		    &#xD;&#xA;         &#xD;&#xA;    /*---------------------------&#xD;&#xA;     Open & Close Animations&#xD;&#xA;    ----------------------------*/&#xD;&#xA;    			//Entrance Animations&#xD;&#xA;    			modal.bind('reveal:open', function () {&#xD;&#xA;    			  modalBG.unbind('click.modalEvent');&#xD;&#xA;    				$('.' + options.dismissmodalclass).unbind('click.modalEvent');&#xD;&#xA;    				if(!locked) {&#xD;&#xA;    					lockModal();&#xD;&#xA;    					if(options.animation == "fadeAndPop") {&#xD;&#xA;    						modal.css({'top': $(document).scrollTop()-topOffset, 'opacity' : 0, 'visibility' : 'visible'});&#xD;&#xA;    						modalBG.fadeIn(options.animationspeed/2);&#xD;&#xA;    						modal.delay(options.animationspeed/2).animate({&#xD;&#xA;    							"top": $(document).scrollTop()+topMeasure + 'px',&#xD;&#xA;    							"opacity" : 1&#xD;&#xA;    						}, options.animationspeed,unlockModal());					&#xD;&#xA;    					}&#xD;&#xA;    					if(options.animation == "fade") {&#xD;&#xA;    						modal.css({'opacity' : 0, 'visibility' : 'visible', 'top': $(document).scrollTop()+topMeasure});&#xD;&#xA;    						modalBG.fadeIn(options.animationspeed/2);&#xD;&#xA;    						modal.delay(options.animationspeed/2).animate({&#xD;&#xA;    							"opacity" : 1&#xD;&#xA;    						}, options.animationspeed,unlockModal());					&#xD;&#xA;    					} &#xD;&#xA;    					if(options.animation == "none") {&#xD;&#xA;    						modal.css({'visibility' : 'visible', 'top':$(document).scrollTop()+topMeasure});&#xD;&#xA;    						modalBG.css({"display":"block"});	&#xD;&#xA;    						unlockModal()				&#xD;&#xA;    					}&#xD;&#xA;    				}&#xD;&#xA;    				modal.unbind('reveal:open');&#xD;&#xA;    			}); 	&#xD;&#xA;    			//Closing Animation&#xD;&#xA;    			modal.bind('reveal:close', function () {&#xD;&#xA;    			  if(!locked) {&#xD;&#xA;    					lockModal();&#xD;&#xA;    					if(options.animation == "fadeAndPop") {&#xD;&#xA;    						modalBG.delay(options.animationspeed).fadeOut(options.animationspeed);&#xD;&#xA;    						modal.animate({&#xD;&#xA;    							"top":  $(document).scrollTop()-topOffset + 'px',&#xD;&#xA;    							"opacity" : 0&#xD;&#xA;    						}, options.animationspeed/2, function() {&#xD;&#xA;    							modal.css({'top':topMeasure, 'opacity' : 1, 'visibility' : 'hidden'});&#xD;&#xA;    							unlockModal();&#xD;&#xA;    						});					&#xD;&#xA;    					}  	&#xD;&#xA;    					if(options.animation == "fade") {&#xD;&#xA;    						modalBG.delay(options.animationspeed).fadeOut(options.animationspeed);&#xD;&#xA;    						modal.animate({&#xD;&#xA;    							"opacity" : 0&#xD;&#xA;    						}, options.animationspeed, function() {&#xD;&#xA;    							modal.css({'opacity' : 1, 'visibility' : 'hidden', 'top' : topMeasure});&#xD;&#xA;    							unlockModal();&#xD;&#xA;    						});					&#xD;&#xA;    					}  	&#xD;&#xA;    					if(options.animation == "none") {&#xD;&#xA;    						modal.css({'visibility' : 'hidden', 'top' : topMeasure});&#xD;&#xA;    						modalBG.css({'display' : 'none'});	&#xD;&#xA;    					}		&#xD;&#xA;    				}&#xD;&#xA;    				modal.unbind('reveal:close');&#xD;&#xA;    			});     &#xD;&#xA;       	&#xD;&#xA;    /*---------------------------&#xD;&#xA;     Open and add Closing Listeners&#xD;&#xA;    ----------------------------*/&#xD;&#xA;            	//Open Modal Immediately&#xD;&#xA;        	modal.trigger('reveal:open')&#xD;&#xA;    			&#xD;&#xA;    			//Close Modal Listeners&#xD;&#xA;    			var closeButton = $('.' + options.dismissmodalclass).bind('click.modalEvent', function () {&#xD;&#xA;    			  modal.trigger('reveal:close')&#xD;&#xA;    			});&#xD;&#xA;    			&#xD;&#xA;    			if(options.closeonbackgroundclick) {&#xD;&#xA;    				modalBG.css({"cursor":"pointer"})&#xD;&#xA;    				modalBG.bind('click.modalEvent', function () {&#xD;&#xA;    				  modal.trigger('reveal:close')&#xD;&#xA;    				});&#xD;&#xA;    			}&#xD;&#xA;    			$('body').keyup(function(e) {&#xD;&#xA;            		if(e.which===27){ modal.trigger('reveal:close'); } // 27 is the keycode for the Escape key&#xD;&#xA;    			});&#xD;&#xA;    			&#xD;&#xA;    			&#xD;&#xA;    /*---------------------------&#xD;&#xA;     Animations Locks&#xD;&#xA;    ----------------------------*/&#xD;&#xA;    			function unlockModal() { &#xD;&#xA;    				locked = false;&#xD;&#xA;    			}&#xD;&#xA;    			function lockModal() {&#xD;&#xA;    				locked = true;&#xD;&#xA;    			}	&#xD;&#xA;    			&#xD;&#xA;            });//each call&#xD;&#xA;        }//orbit plugin call&#xD;&#xA;    })(jQuery);