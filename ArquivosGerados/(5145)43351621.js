    $(document).ready(function() {&#xD;&#xA;      // Move cursor to the end.&#xD;&#xA;       function placeCaretAtEndX(el) {&#xD;&#xA;          el.focus();&#xD;&#xA;          if (&#xD;&#xA;             typeof window.getSelection != "undefined" &&&#xD;&#xA;             typeof document.createRange != "undefined"&#xD;&#xA;          ) {&#xD;&#xA;             var range = document.createRange();&#xD;&#xA;             range.selectNodeContents(el);&#xD;&#xA;             range.collapse(false);&#xD;&#xA;             var sel = window.getSelection();&#xD;&#xA;             sel.removeAllRanges();&#xD;&#xA;             sel.addRange(range);&#xD;&#xA;          } else if (typeof document.body.createTextRange != "undefined") {&#xD;&#xA;             var textRange = document.body.createTextRange();&#xD;&#xA;             textRange.moveToElementText(el);&#xD;&#xA;             textRange.collapse(false);&#xD;&#xA;             textRange.select();&#xD;&#xA;          }&#xD;&#xA;       }&#xD;&#xA;       // Define special characters:&#xD;&#xA;       var charactersX = new Set([&#xD;&#xA;          0,&#xD;&#xA;          32, // space&#xD;&#xA;          13 // enter&#xD;&#xA;          // add other punctuation symbols or keys&#xD;&#xA;       ]);&#xD;&#xA;       // Add hashtags on each word.&#xD;&#xA;       function addHashtags(text) {&#xD;&#xA;          // Add hashtag.&#xD;&#xA;          text = text.replace(/([\w]+)/gi, function addHashtag(x) {&#xD;&#xA;             return "#" + x;&#xD;&#xA;          });&#xD;&#xA;          // Remove duplicated words&#xD;&#xA;          text = text.replace(/\b(\w+)\b(?=.*\b\1\b)/gi, function removeDuplicates(&#xD;&#xA;             x&#xD;&#xA;          ) {&#xD;&#xA;             return "";&#xD;&#xA;          });&#xD;&#xA;          // Prevent single/double hashtags&#xD;&#xA;          text = text.replace(/[#]{2,}/gi, function removeDoubleHashtags(x) {&#xD;&#xA;             return "#";&#xD;&#xA;          });&#xD;&#xA;          text = text.replace(/[#]{1}\s+/gi, function removeSingleHashtags(x) {&#xD;&#xA;             return "";&#xD;&#xA;          });&#xD;&#xA;          // Prevent double spaces&#xD;&#xA;          text = text.replace(/  /g, " ");&#xD;&#xA;          text = text.trim();&#xD;&#xA;          // return results&#xD;&#xA;          return text;&#xD;&#xA;       }&#xD;&#xA;       // Convert characters to charCode&#xD;&#xA;       function toCharCodeX(char) {&#xD;&#xA;          return char.charCodeAt(0);&#xD;&#xA;       }&#xD;&#xA;       var forbiddenCharactersX = new Set([&#xD;&#xA;          toCharCodeX("_"),&#xD;&#xA;          toCharCodeX("-"),&#xD;&#xA;          toCharCodeX("?"),&#xD;&#xA;          toCharCodeX("*"),&#xD;&#xA;          toCharCodeX("\\"),&#xD;&#xA;          toCharCodeX("/"),&#xD;&#xA;          toCharCodeX("("),&#xD;&#xA;          toCharCodeX(")"),&#xD;&#xA;          toCharCodeX("="),&#xD;&#xA;          toCharCodeX("&"),&#xD;&#xA;          toCharCodeX("%"),&#xD;&#xA;          toCharCodeX("+"),&#xD;&#xA;          toCharCodeX("^"),&#xD;&#xA;          toCharCodeX("#"),&#xD;&#xA;          toCharCodeX("'"),&#xD;&#xA;          toCharCodeX("<"),&#xD;&#xA;          toCharCodeX("|"),&#xD;&#xA;          toCharCodeX(">"),&#xD;&#xA;          toCharCodeX("."),&#xD;&#xA;          toCharCodeX(","),&#xD;&#xA;          toCharCodeX(";")&#xD;&#xA;       ]);&#xD;&#xA;       $(document).on("textInput", "#text", function(event) {&#xD;&#xA;          var code = event.originalEvent.data.charCodeAt(0);&#xD;&#xA;          if (charactersX.has(code)) {&#xD;&#xA;             // Get and modify text.&#xD;&#xA;             var text = $("#text").text();&#xD;&#xA;             text = addHashtags(text);&#xD;&#xA;             // Save content.&#xD;&#xA;             $("#text").text(text);&#xD;&#xA;             // Move cursor to the end&#xD;&#xA;             placeCaretAtEndX(document.querySelector("#text"));&#xD;&#xA;          } else if (forbiddenCharactersX.has(code)) {&#xD;&#xA;             event.preventDefault();&#xD;&#xA;          }&#xD;&#xA;       });&#xD;&#xA;    });