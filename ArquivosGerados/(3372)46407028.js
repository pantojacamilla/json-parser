    $(document).ready(function() {&#xD;&#xA;                 var tabTitle = $('#tab_title'),&#xD;&#xA;                     tabContent = $('#tab_content'),&#xD;&#xA;                     tabTemplate = '<li class="ui-droppable ui-state-default"><a href="#{href}">#{label}</a> <span class="ui-icon ui-icon-close" role="presentation">Remove Tab</span></li>',&#xD;&#xA;                     tabCounter = $('#tabs').children('div').length + 1,&#xD;&#xA;                     feedTemplate = '';&#xD;&#xA;                 &#xD;&#xA;                 var tabs = $('#tabs').tabs();&#xD;&#xA;                 var feeds = $('#tabs').children('div');&#xD;&#xA;                 &#xD;&#xA;                 // Modal dialog init: custom buttons and a "close" callback resetting the form inside&#xD;&#xA;                 var dialog = $( "#dialog" ).dialog({&#xD;&#xA;                     autoOpen: false,&#xD;&#xA;                     modal: true,&#xD;&#xA;                     buttons: {&#xD;&#xA;                         Add: function() {&#xD;&#xA;                             addTab();&#xD;&#xA;                             $( this ).dialog( "close" );&#xD;&#xA;                         },&#xD;&#xA;                         Cancel: function() {&#xD;&#xA;                             $( this ).dialog( "close" );&#xD;&#xA;                         }&#xD;&#xA;                     },&#xD;&#xA;                     close: function() {&#xD;&#xA;                         form[ 0 ].reset();&#xD;&#xA;                     }&#xD;&#xA;                 });&#xD;&#xA;                 &#xD;&#xA;                 // AddTab form: calls addTab function on submit and closes the dialog&#xD;&#xA;                 var form = dialog.find( "form" ).on( "submit", function( event ) {&#xD;&#xA;                     addTab();&#xD;&#xA;                     dialog.dialog( "close" );&#xD;&#xA;                     event.preventDefault();&#xD;&#xA;                 });&#xD;&#xA;                 &#xD;&#xA;                 // Actual addTab function: adds new tab using the input from the form above&#xD;&#xA;                 function addTab() {&#xD;&#xA;                     var label = tabTitle.val() || 'Tab ' + tabCounter,&#xD;&#xA;                         id = 'tabs-' + tabCounter,&#xD;&#xA;                         li = $( tabTemplate.replace( /#\{href\}/g, '#' + id ).replace( /#\{label\}/g, label ) ),&#xD;&#xA;                         tabContentHtml = tabContent.val() || 'Plop Tab ' + tabCounter + ' contentz.';&#xD;&#xA;                     &#xD;&#xA;                     tabs.find( '.ui-tabs-nav' ).append( li );&#xD;&#xA;                     tabs.append( '<div class="ui-tabs-panel ui-corner-bottom ui-widget-content" id="' + id + '"><div class="elements grid nws-tab-feeds nws-tab-feeds-col ui-tabs-panel ui-corner-bottom ui-widget-content ui-droppable"><div class="element grid-item outerContainer-col outerContainer ui-draggable ui-draggable-handle">' + tabContentHtml + '<span class="ui-icon ui-icon-close" role="presentation">Remove feed</span></div></div></div>' );&#xD;&#xA;                     tabCounter++;&#xD;&#xA;                     &#xD;&#xA;    //                DOESN'T WORK &#xD;&#xA;    //                                  $( ".elements" ).droppable( "option", "accept", ".special" );&#xD;&#xA;    //                 $( ".elements" ).droppable({&#xD;&#xA;    //                     accept: ".element"&#xD;&#xA;    //                 });&#xD;&#xA;                     &#xD;&#xA;                     tabs.tabs( "refresh" );&#xD;&#xA;                     &#xD;&#xA;                 }&#xD;&#xA;                 &#xD;&#xA;                 // AddTab button: just opens the dialog&#xD;&#xA;                 $( "#add_tab" )&#xD;&#xA;                     .button()&#xD;&#xA;                     .on( "click", function() {&#xD;&#xA;                         dialog.dialog( "open" );&#xD;&#xA;                     });&#xD;&#xA;                 &#xD;&#xA;                 // Close icon: removing the tab on click&#xD;&#xA;                 tabs.on( "click", "span.ui-icon-close", function() {&#xD;&#xA;                     var panelId = $( this ).closest( "li" ).remove().attr( "aria-controls" );&#xD;&#xA;                     $( "#" + panelId ).remove();&#xD;&#xA;                     tabs.tabs( "refresh" );&#xD;&#xA;                 });&#xD;&#xA;                 // Close icon: removing the feed on click&#xD;&#xA;                 feeds.on( "click", "span.ui-icon-close", function() {&#xD;&#xA;                     $(this).parent().remove();&#xD;&#xA;                 });&#xD;&#xA;                 &#xD;&#xA;                 tabs.on( "keyup", function( event ) {&#xD;&#xA;                     if ( event.altKey && event.keyCode === $.ui.keyCode.BACKSPACE ) {&#xD;&#xA;                         var panelId = tabs.find( ".ui-tabs-active" ).remove().attr( "aria-controls" );&#xD;&#xA;                         $( "#" + panelId ).remove();&#xD;&#xA;                         tabs.tabs( "refresh" );&#xD;&#xA;                     }&#xD;&#xA;                 });&#xD;&#xA;                 $('.elements').children().draggable({&#xD;&#xA;                     appendTo: 'body',&#xD;&#xA;                     opacity: 0.9,&#xD;&#xA;                     helper: "clone",&#xD;&#xA;                     zIndex: 1000,&#xD;&#xA;                     cursorAt: {&#xD;&#xA;                         left: 50,&#xD;&#xA;                         top: 20&#xD;&#xA;                     },&#xD;&#xA;                 });&#xD;&#xA;                 // drop into needle element&#xD;&#xA;                 $('.elements').droppable({&#xD;&#xA;                     accept: '.element',&#xD;&#xA;                     tolerance: 'pointer',&#xD;&#xA;                     activeClass: "can-drop",&#xD;&#xA;                     hoverClass: "drop-here",&#xD;&#xA;                     drop: function(event, ui) {&#xD;&#xA;                         $(this).append(ui.draggable[0]);&#xD;&#xA;                         // var count = $("#tabs-1 div").length;&#xD;&#xA;                         console.log('l: ' + $(this).children().length);&#xD;&#xA;                     }&#xD;&#xA;                 });&#xD;&#xA;                 // drop&#xD;&#xA;                 $('ul.ui-tabs-nav').children().droppable({&#xD;&#xA;                     accept: '.element',&#xD;&#xA;                     tolerance: 'pointer',&#xD;&#xA;                     over: function(event, ui) {&#xD;&#xA;                         $("#tabs").tabs("option", "active", $(event.target).index());&#xD;&#xA;                         console.log('plop: ' + $(event.target).index());&#xD;&#xA;                         $.ui.ddmanager.prepareOffsets(ui.draggable.draggable('instance'));&#xD;&#xA;                     }&#xD;&#xA;                 })&#xD;&#xA;                 &#xD;&#xA;             });