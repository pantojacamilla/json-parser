    function surroundSelection() {&#xD;&#xA;        var code = document.createElement("code");&#xD;&#xA;        code.style.fontStyle = "italic";&#xD;&#xA;        code.style.color = "#333";&#xD;&#xA;        code.style.background = "#ddd";&#xD;&#xA;        &#xD;&#xA;        if (window.getSelection) {&#xD;&#xA;            var sel = window.getSelection();&#xD;&#xA;            if (sel.rangeCount) {&#xD;&#xA;                var range = sel.getRangeAt(0).cloneRange();&#xD;&#xA;                range.surroundContents(code);&#xD;&#xA;                sel.removeAllRanges();&#xD;&#xA;                sel.addRange(range);&#xD;&#xA;            }&#xD;&#xA;        }&#xD;&#xA;    }