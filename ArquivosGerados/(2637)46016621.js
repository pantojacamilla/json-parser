    var dcanvas = document.getElementById('char-canvas'),&#xD;&#xA;      dcontext = dcanvas.getContext('2d');&#xD;&#xA;    function fontDensity(c) {&#xD;&#xA;      dcanvas.height = 30;&#xD;&#xA;      dcanvas.width = 30;&#xD;&#xA;      dcontext.clearRect(0, 0, dcanvas.width, dcanvas.height);&#xD;&#xA;      dcontext.font = "15px monospace";&#xD;&#xA;      dcontext.fillStyle = "black";&#xD;&#xA;      dcontext.textAlign = "center";&#xD;&#xA;      dcontext.textBaseline = "middle";&#xD;&#xA;      dcontext.fillText(c, dcanvas.width / 2, dcanvas.height / 2);&#xD;&#xA;      var imgd = dcontext.getImageData(0, 0, dcanvas.width, dcanvas.height),&#xD;&#xA;        pix = imgd.data,&#xD;&#xA;        density = 0;&#xD;&#xA;      // Read canvas pixels RGBA!&#xD;&#xA;      for (var i = 0, n = pix.length; i < n; i += 4) {&#xD;&#xA;        density += (pix[i] + pix[i + 1] + pix[i + 2]) / 3;&#xD;&#xA;      }&#xD;&#xA;      //density /= pix.length;&#xD;&#xA;      return density;&#xD;&#xA;    }&#xD;&#xA;    setTimeout(function() {&#xD;&#xA;      alert(fontDensity("a"));&#xD;&#xA;    }, 100);