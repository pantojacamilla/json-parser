    // On document ready function.&#xD;&#xA;    $(document).ready(function() {&#xD;&#xA;      canvas = document.getElementById("myImageDisplayerCanvas");&#xD;&#xA;      drawingContext = canvas.getContext("2d");&#xD;&#xA;      drawingContext.fillStyle = "#000000";&#xD;&#xA;      drawingContext.fillRect(0, 0, 800, 554);&#xD;&#xA;    });&#xD;&#xA;    // Spray paint logic.&#xD;&#xA;    var _intervalId, // used to track the current interval ID&#xD;&#xA;      _center, // the current center to spray&#xD;&#xA;      density = 10,&#xD;&#xA;      radius = 10,&#xD;&#xA;      drawingCxt,&#xD;&#xA;      leftClickPressed,&#xD;&#xA;      drawingContext,&#xD;&#xA;      canvas;&#xD;&#xA;    function getRandomOffset() {&#xD;&#xA;      var randomAngle = Math.random() * 360;&#xD;&#xA;      var randomRadius = Math.random() * radius;&#xD;&#xA;      return {&#xD;&#xA;        x: Math.cos(randomAngle) * randomRadius,&#xD;&#xA;        y: Math.sin(randomAngle) * randomRadius&#xD;&#xA;      };&#xD;&#xA;    }&#xD;&#xA;    this.startDrawing = function(position) {&#xD;&#xA;      _center = position;&#xD;&#xA;      leftClickPressed = true;&#xD;&#xA;      // spray once every 10 milliseconds&#xD;&#xA;      _intervalId = setInterval(this.spray, 10);&#xD;&#xA;    };&#xD;&#xA;    this.moveDrawing = function(position) {&#xD;&#xA;      if (leftClickPressed) {&#xD;&#xA;        clearInterval(_intervalId);&#xD;&#xA;        _center = position;&#xD;&#xA;        // spray once every 10 milliseconds&#xD;&#xA;        _intervalId = setInterval(this.spray, 10);&#xD;&#xA;      }&#xD;&#xA;    }&#xD;&#xA;    this.finishDrawing = function(position) {&#xD;&#xA;      clearInterval(_intervalId);&#xD;&#xA;      leftClickPressed = false;&#xD;&#xA;    };&#xD;&#xA;    this.spray = function() {&#xD;&#xA;      var centerX = parseInt(_center.offsetX),&#xD;&#xA;        centerY =&#xD;&#xA;        parseInt(_center.offsetY),&#xD;&#xA;        i;&#xD;&#xA;      for (i = 0; i < density; i++) {&#xD;&#xA;        var offset = getRandomOffset();&#xD;&#xA;        var x = centerX + parseInt(offset.x) - 1,&#xD;&#xA;          y = centerY +&#xD;&#xA;          parseInt(offset.y) - 1;&#xD;&#xA;        var dy = y * 800 * 4;&#xD;&#xA;        var pos = dy + x * 4;&#xD;&#xA;        var imageData = drawingContext.getImageData(0, 0, 800, 554);&#xD;&#xA;        imageData.data[pos++] = 0;&#xD;&#xA;        imageData.data[pos++] = 0;&#xD;&#xA;        imageData.data[pos++] = 0;&#xD;&#xA;        imageData.data[pos++] = 0;&#xD;&#xA;        drawingContext.putImageData(imageData, 0, 0);&#xD;&#xA;      }&#xD;&#xA;    };