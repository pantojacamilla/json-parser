    package com.lennoardsilva.teresinabus;&#xD;&#xA;    import android.app.Activity;&#xD;&#xA;    import android.os.Bundle;&#xD;&#xA;    import android.support.v4.app.ListFragment;&#xD;&#xA;    import android.view.View;&#xD;&#xA;    import android.widget.ArrayAdapter;&#xD;&#xA;    import android.widget.ListView;&#xD;&#xA;    import com.lennoardsilva.teresinabus.dummy.DummyContent;&#xD;&#xA;    public class LinhaListFragment extends ListFragment {&#xD;&#xA;        private static final String STATE_ACTIVATED_POSITION = "activated_position";&#xD;&#xA;        private Callbacks mCallbacks = sDummyCallbacks;&#xD;&#xA;        private int mActivatedPosition = ListView.INVALID_POSITION;&#xD;&#xA;        public interface Callbacks {&#xD;&#xA;            public void onItemSelected(String id);&#xD;&#xA;        }&#xD;&#xA;        private static Callbacks sDummyCallbacks = new Callbacks() {&#xD;&#xA;            @Override&#xD;&#xA;            public void onItemSelected(String id) {&#xD;&#xA;            }&#xD;&#xA;        };&#xD;&#xA;        public LinhaListFragment() {&#xD;&#xA;        }&#xD;&#xA;        @Override&#xD;&#xA;        public void onCreate(Bundle savedInstanceState) {&#xD;&#xA;            super.onCreate(savedInstanceState);&#xD;&#xA;            setListAdapter(new ArrayAdapter<DummyContent.DummyItem>(getActivity(),android.R.layout.simple_list_item_activated_1, android.R.id.text1, DummyContent.ITEMS));&#xD;&#xA;        }&#xD;&#xA;        @Override&#xD;&#xA;        public void onViewCreated(View view, Bundle savedInstanceState) {&#xD;&#xA;            super.onViewCreated(view, savedInstanceState);&#xD;&#xA;            if (savedInstanceState != null && savedInstanceState.containsKey(STATE_ACTIVATED_POSITION)) {&#xD;&#xA;                setActivatedPosition(savedInstanceState.getInt(STATE_ACTIVATED_POSITION));&#xD;&#xA;            }&#xD;&#xA;        }&#xD;&#xA;        @Override&#xD;&#xA;        public void onAttach(Activity activity) {&#xD;&#xA;            super.onAttach(activity);&#xD;&#xA;            // Activities containing this fragment must implement its callbacks.&#xD;&#xA;            if (!(activity instanceof Callbacks)) {&#xD;&#xA;                throw new IllegalStateException("Activity must implement fragment's callbacks.");&#xD;&#xA;            }&#xD;&#xA;            mCallbacks = (Callbacks) activity;&#xD;&#xA;        }&#xD;&#xA;        @Override&#xD;&#xA;        public void onDetach() {&#xD;&#xA;            super.onDetach();&#xD;&#xA;            mCallbacks = sDummyCallbacks;&#xD;&#xA;        }&#xD;&#xA;        @Override&#xD;&#xA;        public void onListItemClick(ListView listView, View view, int position, long id) {&#xD;&#xA;            super.onListItemClick(listView, view, position, id);&#xD;&#xA;            mCallbacks.onItemSelected(DummyContent.ITEMS.get(position).id);&#xD;&#xA;        }&#xD;&#xA;        @Override&#xD;&#xA;        public void onSaveInstanceState(Bundle outState) {&#xD;&#xA;            super.onSaveInstanceState(outState);&#xD;&#xA;            if (mActivatedPosition != ListView.INVALID_POSITION) {&#xD;&#xA;                outState.putInt(STATE_ACTIVATED_POSITION, mActivatedPosition);&#xD;&#xA;            }&#xD;&#xA;        }&#xD;&#xA;        public void setActivateOnItemClick(boolean activateOnItemClick) {&#xD;&#xA;            getListView().setChoiceMode(activateOnItemClick ? ListView.CHOICE_MODE_SINGLE : ListView.CHOICE_MODE_NONE);&#xD;&#xA;        }&#xD;&#xA;        private void setActivatedPosition(int position) {&#xD;&#xA;            if (position == ListView.INVALID_POSITION) {&#xD;&#xA;                getListView().setItemChecked(mActivatedPosition, false);&#xD;&#xA;            } else {&#xD;&#xA;                getListView().setItemChecked(position, true);&#xD;&#xA;            }&#xD;&#xA;            mActivatedPosition = position;&#xD;&#xA;        }&#xD;&#xA;    }