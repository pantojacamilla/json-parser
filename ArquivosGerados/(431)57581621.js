    $(document).on('click', 'button', function(e) {&#xD;&#xA;    		var target = $(this).attr('class');&#xD;&#xA;    		var str = window.getSelection();&#xD;&#xA;    		var text = str.toString().trim();&#xD;&#xA;    		var l = text.length;&#xD;&#xA;    		var node = str.anchorNode.textContent;&#xD;&#xA;    		var start = node.charAt(str.anchorOffset - 1);&#xD;&#xA;    		var end = node.charAt(str.extentOffset);&#xD;&#xA;    	&#xD;&#xA;    		if ( $(str.baseNode).closest('.input').length > 0 ) {&#xD;&#xA;    			switch(target) {&#xD;&#xA;    				case 'test':&#xD;&#xA;    					if ( (text.charAt(0) != "`" && text.charAt(l-1) ) ) {&#xD;&#xA;    						var replacementText = "`"+text+"` ";&#xD;&#xA;    					} else {&#xD;&#xA;    						var rid = text.replace(/`/g, '');&#xD;&#xA;    						var replacementText = rid + ' ';&#xD;&#xA;    					}&#xD;&#xA;    					&#xD;&#xA;    					if ( (start == "`" && end == "`") || (start == "`" && end == " `") ) {&#xD;&#xA;    						console.log('trueeee');&#xD;&#xA;    						var replacementText = text.replace(/`/g, '');&#xD;&#xA;    					}&#xD;&#xA;    					&#xD;&#xA;    					break;&#xD;&#xA;    			}&#xD;&#xA;    			formatSelection(str, text, replacementText);&#xD;&#xA;    		}&#xD;&#xA;    	});&#xD;&#xA;    	&#xD;&#xA;    	// format with buttons&#xD;&#xA;    	function formatSelection(str, text, replacementText) {&#xD;&#xA;    		var sel, range;&#xD;&#xA;    		if (window.getSelection) {&#xD;&#xA;    			sel = window.getSelection();&#xD;&#xA;    			if (sel.rangeCount) {&#xD;&#xA;    				range = sel.getRangeAt(0);&#xD;&#xA;    				range.deleteContents();&#xD;&#xA;    				range.insertNode(document.createTextNode(replacementText));&#xD;&#xA;    			}&#xD;&#xA;    		} else if (document.selection && document.selection.createRange) {&#xD;&#xA;    			range = document.selection.createRange();&#xD;&#xA;    			range.text = replacementText;&#xD;&#xA;    		}&#xD;&#xA;    	}