    var canvas = document.getElementById('canvas');&#xD;&#xA;    var ctx = canvas.getContext('2d');&#xD;&#xA;    var points = []; &#xD;&#xA;    var size = 10;&#xD;&#xA;    var prevX = 0;&#xD;&#xA;    var prevY = 0;&#xD;&#xA;    var isCanDraw = false;&#xD;&#xA;        $("#canvas").on("mousedown", function(e) {&#xD;&#xA;            isCanDraw = true;&#xD;&#xA;            prevX = e.clientX;&#xD;&#xA;            prevY = e.clientY;&#xD;&#xA;            points.push({x: prevX, y: prevY, size: size, mode: "begin"});&#xD;&#xA;        });&#xD;&#xA;        $("#canvas").on("mousemove", function(e) {&#xD;&#xA;            if(isCanDraw) {&#xD;&#xA;                stroke(e.clientX, e.clientY);&#xD;&#xA;                points.push({x: prevX, y: prevY, size: size, mode: "draw"});&#xD;&#xA;            }     &#xD;&#xA;        });&#xD;&#xA;        $("#canvas").on("mouseup", function(e) {&#xD;&#xA;            isCanDraw = false;  &#xD;&#xA;            points.push({x: prevX, y: prevY, size: size, mode: "end"});&#xD;&#xA;        });&#xD;&#xA;        $("#canvas").on("mouseleave", function(e) {&#xD;&#xA;            isCanDraw = false; &#xD;&#xA;        });&#xD;&#xA;        $("#undo").on("click", function(e) {&#xD;&#xA;            deleteLast();&#xD;&#xA;            redraw();&#xD;&#xA;        });&#xD;&#xA;        function deleteLast() {&#xD;&#xA;            if(points.length != 0) {&#xD;&#xA;                var i = points.length - 1;&#xD;&#xA;                while(points[i].mode != "begin") {&#xD;&#xA;                    i--; &#xD;&#xA;                    points.pop();&#xD;&#xA;                }&#xD;&#xA;                points.pop();&#xD;&#xA;            }&#xD;&#xA;        }&#xD;&#xA;        function redraw() {&#xD;&#xA;                ctx.clearRect(0, 0, canvas.width, canvas.height);&#xD;&#xA;                if(points.length != 0) {&#xD;&#xA;                    for(var i=0; i < points.length; i++) {&#xD;&#xA;                        var pt = points[i];&#xD;&#xA;                        var begin=false;&#xD;&#xA;                        if(size != pt.size) {&#xD;&#xA;                            size = pt.size;&#xD;&#xA;                            begin=true;&#xD;&#xA;                        }&#xD;&#xA;                      &#xD;&#xA;                        if(pt.mode == "begin" || begin) {&#xD;&#xA;                            ctx.moveTo(pt.x, pt.y)&#xD;&#xA;                        }&#xD;&#xA;                        &#xD;&#xA;                        ctx.lineTo(pt.x, pt.y)&#xD;&#xA;                        if( pt.mode == "end" || (i == points.length-1) ) {&#xD;&#xA;                            ctx.lineJoin = "round";&#xD;&#xA;                            ctx.stroke()&#xD;&#xA;                        }&#xD;&#xA;                    }&#xD;&#xA;                }&#xD;&#xA;        }&#xD;&#xA;        function stroke(x,y) {&#xD;&#xA;            ctx.lineWidth = size;&#xD;&#xA;            ctx.lineJoin = "round";&#xD;&#xA;            &#xD;&#xA;            ctx.beginPath();&#xD;&#xA;            ctx.moveTo(prevX, prevY);&#xD;&#xA;            ctx.lineTo(x, y);&#xD;&#xA;            ctx.closePath();&#xD;&#xA;            ctx.stroke();&#xD;&#xA;            prevX = x;&#xD;&#xA;            prevY = y;&#xD;&#xA;        }